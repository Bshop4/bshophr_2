<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="hr.mapper.SalaryStandardMapper">

	<resultMap type="SalaryStandard" id="SalaryStandardMap" >
		<id property="ssdId"    column="ssd_id"/>
		<result property="standardId"    column="standard_id"/>
		<result property="standardName"    column="standard_name"/>
		<result property="designer"    column="designer"/>
		<result property="register"    column="register"/>
		<result property="checker"    column="checker"/>
		<result property="changer"    column="changer"/>
		<result property="registTime"    column="regist_time"/>
		<result property="checkTime"    column="check_time"/>
		<result property="changeTime"    column="change_time"/>
		<result property="salarySum"    column="salary_sum"/>
		<result property="checkStatus"    column="check_status"/>
		<result property="changeStatus"    column="change_status"/>
		<result property="checkComment"    column="check_comment"/>
		<result property="remark"    column="remark"/>
	</resultMap>

	
	<select id="selectSalaryStandardAll" resultMap="SalaryStandardMap">
		select * from salary_standard
	</select>
	<!-- 根据条件参数列表 -->
	<select id="selectSalaryStandardAllByConditionPlus" resultMap="SalaryStandardMap" parameterType="hashmap">
		select * from salary_standard where 1=1
        <if test="currentPage!=null and pageSize!=null">
			limit #{currentPage},#{pageSize}
		</if>
	</select>
	<select id="selectSalaryStandardById" parameterType="_int" resultMap="SalaryStandardMap">
		select * from salary_standard where standard_id=#{id}
	</select>
	
	<!-- 向思宇加的id模糊查询 -->
	<select id="selectSalaryStandardByIdDim" resultMap="SalaryStandardMap">
		select * from salary_standard where standard_id like '%${_parameter}%'
	</select>
	
	<!-- 向思宇加的id和name模糊查询 -->
	<!-- 定义变量 -->
	<sql id="byone">
		select * from salary_standard where standard_id like '%1%'
	</sql>
	
	<select id="selectSalaryStandardByCondition" resultType="SalaryStandard" parameterType="SalaryStandard">
		select B.standard_id,B.standard_name,B.designer,B.regist_time,B.salary_sum 
		from <include refid="byone"/> B where B.standard_name REGEXP '浩'
		or B.designer REGEXP '浩'
		or B.checker REGEXP '浩' or B.changer REGEXP '浩'
		<!-- select standard_id,standard_name,designer,regist_time,salary_sum 
		from salary_standard 
		<trim prefix="where" prefixOverrides="and|or">
			<if test="standardId!=null">
				<bind name="sid" value="'%'+standardId+'%'"></bind>
				and standard_id like #{sid}
			</if>
			<if test="standardName!=null">
				<bind name="sname" value="'%'+standardName+'%'"></bind>
				and standard_name like #{sname}
			</if>
			<if test="designer!=null">
				<bind name="des" value="'%'+designer+'%'"></bind>
				or designer like #{des}
			</if>
			<if test="checker!=null">
				<bind name="che" value="'%'+checker+'%'"></bind>
				or checker like #{che}
			</if>
			<if test="changer!=null">
				<bind name="cha" value="'%'+changer+'%'"></bind>
				or changer like #{cha}
			</if>
		</trim> -->
		<!-- where standard_id like '%${_parameter}%' or standard_name like '%${_parameter}%'
		or designer like '%${_parameter}%' or checker like '%${_parameter}%' or changer like '%${_parameter}%' -->
	</select>
	
	<delete id="deleteSalaryStandardById" parameterType="_int">
		delete from salary_standard where ssd_id=#{id}
	</delete>
	<insert id="insertSalaryStandard" parameterType="SalaryStandard">
		insert into salary_standard(standard_id,standard_name,designer,register,checker,changer,regist_time,check_time,change_time,salary_sum,check_status,change_status,check_comment,remark) 
		values(#{standardId},#{standardName},#{designer},#{register},#{checker},#{changer},#{registTime},#{checkTime},#{changeTime},#{salarySum},#{checkStatus},#{changeStatus},#{checkComment},#{remark})
	</insert>
	
	<update id="updateSalaryStandard" parameterType="SalaryStandard">
		update salary_standard set standard_id=#{standardId},standard_name=#{standardName},designer=#{designer},register=#{register},checker=#{checker},changer=#{changer},regist_time=#{registTime},check_time=#{checkTime},change_time=#{changeTime},salary_sum=#{salarySum},check_status=#{checkStatus},change_status=#{changeStatus},check_comment=#{checkComment},remark=#{remark} where ssd_id=#{ssdId}
	</update>
	
	<!-- 向思宇加的修改语句 -->
	<update id="updateSalaryStandardfh" parameterType="SalaryStandard">
		update salary_standard 
		<trim prefix="set" suffixOverrides=",">
			<if test="checker!=null">
				checker=#{checker},
			</if>
			<if test="checkTime!=null">
				check_time=#{checkTime},
			</if>
			<if test="checkStatus!=null">
				check_status=#{checkStatus},
			</if>
			<if test="checkComment!=null">
				check_comment=#{checkComment},
			</if>
		</trim>
		where standard_id=#{standardId}
		<!--  update salary_standard set checker=#{checker},check_time=#{checkTime},check_status=#{checkStatus},check_comment=#{checkComment} where standard_id=#{standard_id} -->
	</update>
</mapper>